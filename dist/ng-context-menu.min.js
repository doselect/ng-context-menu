!function(e){"use strict";e.module("ng-context-menu",[]).factory("ContextMenuService",function(){return{element:null,menuElement:null}}).directive("contextMenu",["$document","ContextMenuService",function(n,t){return{restrict:"A",scope:{callback:"&contextMenu",disabled:"&contextMenuDisabled",closeCallback:"&contextMenuClose",marginBottom:"@contextMenuMarginBottom"},link:function(l,o,c){function a(e,t){o.addClass("expanded"),t.addClass("open");var c=n[0].documentElement,a=(window.pageXOffset||c.scrollLeft)-(c.clientLeft||0),i=(window.pageYOffset||c.scrollTop)-(c.clientTop||0),u=t[0].scrollWidth,m=t[0].scrollHeight,s=c.clientWidth+a,r=c.clientHeight+i,p=u+e.pageX,f=m+e.pageY,g=Math.max(e.pageX-a,0),b=Math.max(e.pageY-i,0);if(p>s&&(g-=p-s),f>r){var x=l.marginBottom||0;b=b-(f-r)-x}t.css("top",b+"px"),t.css("left",g+"px"),d=!0}function i(e){o.removeClass("expanded"),e.removeClass("open"),d&&l.closeCallback(),d=!1}function u(e){!l.disabled()&&d&&27===e.keyCode&&l.$apply(function(){i(t.menuElement)})}function m(e){l.disabled()||!d||2===e.button&&e.target===t.element||l.$apply(function(){i(t.menuElement)})}var d=!1;o.bind("contextmenu",function(n){l.disabled()||(null!==t.menuElement&&i(t.menuElement),t.menuElement=e.element(document.getElementById(c.target)),t.element=n.target,n.preventDefault(),n.stopPropagation(),l.$apply(function(){l.callback({$event:n})}),l.$apply(function(){a(n,t.menuElement)}))}),n.bind("keyup",u),n.bind("click",m),n.bind("contextmenu",m),l.$on("$destroy",function(){n.unbind("keyup",u),n.unbind("click",m),n.unbind("contextmenu",m)})}}}])}(angular);